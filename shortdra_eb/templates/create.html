<html>

<input id="string">String</input>
<input id="url">Url</input>
<button id="create">Create</button>

<div id="success" style="display:none;">Link successful!</div>

</html>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script>

	function getCookie(name) {
	    var cookieValue = null;
	    if (document.cookie && document.cookie != '') {
	        var cookies = document.cookie.split(';');
	        for (var i = 0; i < cookies.length; i++) {
	            var cookie = jQuery.trim(cookies[i]);
	            // Does this cookie string begin with the name we want?
	            if (cookie.substring(0, name.length + 1) == (name + '=')) {
	                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
	                break;
	            }
	        }
	    }
	    return cookieValue;
	}

	$.ajaxSetup({
	    beforeSend: function(xhr, settings) {
	        if (!(/^http:.*/.test(settings.url) || /^https:.*/.test(settings.url))) {
	            // Only send the token to relative URLs i.e. locally.
	            xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
	        }
	    }
	});

	$(document).ready(function() {



		$("#create").click(function() {
			console.log('create');
			var text = $("#string")[0].value;
			console.log(string);
			var link = $("#url")[0].value;
			console.log(url);
			$.ajax({
                url : "/create/POST",
                type: "PUT",
                data: {text: text, link: link},
                success : function(json) {
                    if (json === "Success!") {
                    	$("#success").show();
                    	$("#success").fadeOut(2000);
                    }
                },
                error : function(xhr, errmsg, err) {
                        console.log(errmsg, err, xhr);
                    }

		});
	});
});
</script>